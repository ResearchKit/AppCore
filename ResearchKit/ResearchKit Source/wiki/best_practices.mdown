ResearchKit Best Practices
==========================

This page documents lessons learned while developing and testing
applications using ResearchKit, and while working with IRBs.

Contribute to the Community
---------------------------

Our hope is that users of ResearchKit will contribute new modules
(surveys, active tasks, data visualizations, etc.) back to the
community so that researchers around the world can leverage these
both for new studies and to simplify reproducing the results that
others have reported. See [Contributing].

That said, if you would like to see new features but don't have the
resources to build and contribute it yourself, do file a bug in our
issue tracker so that the community as a whole can evaluate all
options when allocating resources.


Informed Consent
----------------

Ethics review boards or institutional review boards (IRBs) should
review apps or to ensure that the research study is compliant with
participant safety rules and regulations. Participant safety and well
being should be central to any study conducted using ResearchKit.

The Informed Consent functionality in ResearchKit is only intended as
a tool; the details of the Informed Consent functionality in your
application are your responsibility. 

Primary guidance should come from your IRB or ethics committee, but
here are some additional resources that may help you consider the issues.

* The FDA has recently released draft guidance on electronic informed
  consent: [Use of Electronic Informed Consent in Clinical Investigations, Questions and Answers](http://www.fda.gov/downloads/Drugs/GuidanceComplianceRegulatoryInformation/Guidances/UCM436811.pdf)

* We strongly recommend that you obtain explicit consent from the user
  if intending to share data with other researchers outside of your
  primary study.

* The iOS App Store says:

> Apps conducting health-related human subject research must obtain
> consent from participants or, in the case of minors, their parent or
> guardian. Such consent must include the (a) nature, purpose, and
> duration of the research; (b) procedures, risks, and benefits to the
> participant; (c) information about confidentiality and handling of
> data (including any sharing with third parties); (d) a point of
> contact for participant questions; and (e) the withdrawal process.

* Consider including a cryptographic signature to protect the informed
  consent process. 

* Consider the level of identity verification required to obtain a
  valid consent. In some applications, no external verification may be
  required, while in others confirming an email address may be
  sufficient.  Discuss this early with your IRB.

* Consider whether you can provide for prospective participants to ask
  additional questions once they have reviewed your consent material.
  This is a key aspect of in-person consent, and in some studies it
  may be very important to preserve this.

* If your study may recruit minors as participants, you must ensure
  that you are obtaining consent from the parent or guardian rather
  than from the minor. This may require some additional degree of
  identity verification.


Participant Control
-------------------



* Participants should have granular control over what data they
  choose to share with the study.

* Participants should be able to leave a research study at any
  time if they so choose.


Privacy
-------

Every application using ResearchKit is likely to be collecting data
that could be sensitive, so take special care to protect users'
privacy.

* Participant privacy is a core value. Research apps should ensure
  highest levels of security to maintain the privacy of oneâ€™s data.

* Transparency builds trust. Participants should be told upfront
  exactly what enrolling in the study would mean for them and the data
  they contribute.

* Having an explicit privacy policy is highly recommended for every
  app that collects potentially sensitive data. It is also required
  for ResearchKit apps posted to the iOS App Store.

* Use touch ID or PIN access to control access to your app, if it
  records or displays personal data that may be sensitive.

* Do not use iCloud to store private health information.


Security
--------

The flip side of privacy is data security. 

* Use the highest level of file protection possible for the given use
  case. Usually this should be `NSFileProtectionComplete` or
  `NSFileProtectionCompleteUnlessOpen`. In this way, files stored by
  your app are encrypted automatically whenever the device is locked.

* Do not keep potentially sensitive data for longer than strictly
  necessary for your app to function.

* When transmitting data via networks that terminate SSL early, or
  when contemplating a store and forward mechanism of any kind for
  your research data, consider an extra cryptographic wrapper
  for the data to protect it end to end. For example, a Cryptographic
  Message Syntax (CMS) envelope, the same technology used in S/MIME,
  can be used to encrypt data before transmission.


Software development
--------------------

* Embed ResearchKit as an embedded dynamic framework in your app.

* Give your tasks context by using instruction steps at the beginning
  of your task. This also allows for clean presentation of any
  requests for data access.

* If your tasks and questions are maintained in a database, have
  unique keys for them and propagate these through ResearchKit objects
  like `ORKStep` and `ORKOrderedTask` and into ResearchKit results.

* When constructing tasks with conditional logic, use multiple
  constituent `ORKOrderedTask` objects and stitch them together with the
  `ORKTask` protocol.


